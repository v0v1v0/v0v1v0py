<div class="container">

<table style="width: 100%;"><tr>
<td>sparkline</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Draws a sparkline</h2>

<h3>Description</h3>

<p>Draws a times series or ‘sparkline’ in a compact iconic fashion suitable for inclusion in more complex graphics or text.</p>


<h3>Usage</h3>

<pre><code class="language-R">sparkline(s, times = NULL, ylim = NULL, buffer = unit(0, "lines"),
          margins = NULL, IQR = NULL, yaxis = FALSE, xaxis = FALSE,
          ptopts = list(points = NULL, labels = NULL, labels.ch = NULL,
          gp = NULL, just = NULL, pch = NULL), margin.pars = NULL,
          buffer.pars = NULL, frame.pars = NULL, line.pars = gpar(lwd = 1),
          main = NULL, sub = NULL, xlab = NULL, ylab = NULL, new = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>s</code></td>
<td>
<p>a vector or time series (class <code>"ts"</code> or <code>"zoo"</code>) giving the data to be plotted. If <code>s</code> is a time series, the <code>start</code>, <code>end</code>, and <code>frequency</code> found in <code>attributes(s)$tsp</code> are automatically converted into an argument to <code>times</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>the times at which to plot the data; if <code>NULL</code> (the default), equal spacing is assumed, equivalent to setting <code>times = 1:length(s)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>the maximum and minimum value on the y-axis; if <code>NULL</code>, defaults to the actual maximum and minimum of the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>buffer</code></td>
<td>
<p>a buffer above the maximum and below the minimum values attained by the sparkline. Defaults to <code>unit(0, 'lines')</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>margins</code></td>
<td>
<p>margins around the sparkline-plus-buffer area. NULL (the default) provides no margins; the value passed must be a 4-vector of units giving the bottom, left, top and right margins in that order.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IQR</code></td>
<td>
<p>a list of graphics parameters to shade or otherwise delineate the interquartile range of the sparkline. <code>NULL</code> (the default), does not show the IQR. See <code>Details</code> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yaxis</code></td>
<td>
<p>draws a vertical axis if <code>TRUE</code>; defaults to <code>FALSE</code> in which case no axis is drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xaxis</code></td>
<td>
<p><code>'interior'</code> draws a horizontal axis inside the plotting frame; <code>'exterior'</code> outside the plotting frame (in the margins); defaults to <code>FALSE</code>, in which case no axis is drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ptopts</code></td>
<td>
<p>a list of graphics parameters describing the points on the sparkline that are plotted and labelled. In particular the first and last or minimum and maximum points are labeled if <code>ptopts$labels</code> is <code>'first.last'</code> or <code>'min.max'</code>. In addition to <code>labels</code>, other relevant parameters from <code>gpar</code> should be valid. See <code>Details</code> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>margin.pars</code></td>
<td>
<p>a list of graphics parameters describing the margin area. See <code>Details</code> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>buffer.pars</code></td>
<td>
<p>a list of graphics parameters describing the buffer area. See <code>Details</code> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frame.pars</code></td>
<td>
<p>a list of graphics parameters describing the exact area taken up by the plotted sparkline. See <code>Details</code> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>line.pars</code></td>
<td>
<p>a list of graphics parameters describing the sparkline. See <code>Details</code> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>a main title, above the sparkline.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sub</code></td>
<td>
<p>a subtitle, to the right of the sparkline.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>a string to label the x-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>a string to label the y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new</code></td>
<td>
<p>defaults to <code>TRUE</code>, which creates a new, empty page; otherwise adds the sparkline to an existing plot.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In all the cases where a list of graphics parameters is needed, the valid parameter names are the same as would be valid when passed to <code>gpar</code> in the appropriate call. That is, passing <code>list(fill = 'blue', col = 'red')</code> to <code>margin</code> gives a margin that is blue with a red border; but adding <code>fontface = 'bold'</code> will have no effect, just as it would have no effect in a call to <code>grid.rect()</code>. In particular, note that <code>ptopts</code> takes the following non-standard parameters: <code>labels</code>, a vector indexing the points to label or the string <code>'min.max'</code> or <code>'first.last'</code>; <code>labels.ch</code>, a vector of strings giving the labels; and <code>points</code>, a vector indexing the points at which points should be plotted. Passing <code>'min.max'</code> or <code>'first.last'</code> to <code>ptopts$labels</code> overrides any values of <code>ptopts$labels.ch</code>.
</p>


<h3>Note</h3>

<p>This is primarily intended to be called by other functions (<code>sparklines()</code> and <code>sparkmat()</code>), but it can also be used as an alternative to <code>ts.plot()</code>.  Thanks to Gabor Grothendieck for suggesting the generalization that provides support of <code>"zoo"</code> objects.</p>


<h3>Author(s)</h3>

<p>John W. Emerson, Walton Green</p>


<h3>References</h3>

<p>Tufte, E. R. (2006) /it Beautiful Evidence Cheshire, Connecticut: Graphics Press.</p>


<h3>See Also</h3>

<p><code>ts.plot</code>, <code>sparklines</code>, <code>sparkmat</code></p>


<h3>Examples</h3>

<pre><code class="language-R">
### sparkline examples
data(nhtemp)

## The default behaviour of sparkline

sparkline(nhtemp)

## Creating stand-alone plots

sparkline(rnorm(10),
                buffer = unit(1, "lines"),
                ptopts = 'first.last',
                margins = unit(c(1,1,1,1), 'inches'),
                yaxis = TRUE, xaxis=TRUE,
                IQR = gpar(fill = 'grey', col = 'grey'),
                main = "Ten Random Standard Normal Numbers",
                sub = '...plotted here')

data(YaleEnergy)
y &lt;- YaleEnergy[YaleEnergy$name==YaleEnergy$name[2],]
sparkline(y$ELSQFT, times=y$year+y$month/12,
          xaxis=TRUE, yaxis=TRUE, main="Branford College Electrical Consumption",
          buffer=unit(1, "lines"), margins = unit(c(1, 1, 1, 1), 'inches'))

sparkline(Nile,
                buffer = unit(1, "lines"),
                ptopts = list(labels = 'min.max'),
                margin.pars = gpar(fill = 'lightblue'),
                buffer.pars = gpar(fill = 'lightgreen'),
                frame.pars = gpar(fill = 'lightyellow'),
                yaxis = TRUE, xaxis=TRUE,
                IQR = gpar(fill = 'grey', col = 'grey'),
                main="Nile Discharge between 1871 and 1970",
                sub='In what units?')

## Adding a sparkline to an existing plot

grid.newpage()
pushViewport(viewport(w = 0.8, h = 0.8))
sparkline(rnorm(10),
                buffer = unit(1, "lines"),
                margins = unit(c(4,4,4,4),'points'),
                ptopts = list(labels = 'min.max'),
                margin.pars = gpar(fill = 'lightblue'),
                buffer.pars = gpar(fill = 'lightgreen'),
                frame.pars = gpar(fill = 'lightyellow'),
                yaxis = TRUE, xaxis=TRUE,
                IQR = gpar(fill = 'grey', col = 'grey'),
                main="Title (plotted OUTSIDE the viewport)", new = FALSE)
popViewport()

</code></pre>


</div>